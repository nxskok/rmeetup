---
title: "From Longer and Wider, We Stand on Guard for Thee"
author: "Ken Butler\nDepartment of Computer and Mathematical Sciences\nUTSC (Scarborough)"
output: beamer_presentation
---

## Packages

```{r}
library(tidyverse)
```


## Pig feed

20 pigs are randomly assigned to one of four pig feeds, and the weight gain of each pig is measured:

```
pig feed1 feed2 feed3 feed4
 1   60.8  68.7  92.6  87.9
 2   57.0  67.7  92.1  84.2
 3   65.0  74.0  90.2  83.1
 4   58.6  66.3  96.5  85.7
 5   61.7  69.8  99.1  90.3
```

Say we want graphs of weight gain for each feed.

## Read in:


```{r}
pigs <- read_table("pigs1.txt")
pigs
```


## and then we have to do this 4 times...

```{r}
ggplot(pigs, aes(x=1, y=feed1)) + geom_boxplot()
```

## The problem

- The data frame is the *wrong shape*.
- Need all the weight gains in *one* column, with another column saying what feed that weight gain was from
- Make data frame longer.
- Old tools:
  - `reshape`
  - `reshape2`
  - `gather` (from `tidyr`)
- New tool: `pivot_longer`

## On the pig feed data

```{r}
pigs
pigs %>% pivot_longer(-pig, names_to="feed", 
                      values_to="weight") -> pigs_longer
```

## The results

```{r}
pigs_longer
```


## Now we can make all 4 graphs at once

```{r}
ggplot(pigs_longer, aes(x=feed, y=weight)) + geom_boxplot()
```


## another example

this one:

```
Species     Disease present         Disease absent
       Location X Location Y  Location X Location Y
A            44         12          38        10
B            28         22          20        18
```

one where I use .value

summarize with list, eg the exam one
reformat the data so I have to process it first

pivot_wider, eg five-number summary of something (the rock-drilling data)









